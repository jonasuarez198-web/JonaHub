-- JONA HITBOX MINI V2 (Delta)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local lp = Players.LocalPlayer

local enabled = false
local HITBOX = 5
local UI_SCALE = 0.7

local adornments = {}

-- GUI
local gui = Instance.new("ScreenGui", game.CoreGui)

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0,180*UI_SCALE,0,80*UI_SCALE)
frame.Position = UDim2.new(.4,0,.6,0)
frame.BackgroundColor3 = Color3.fromRGB(0,0,0)
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0.4,0)
title.BackgroundTransparency = 1
title.Text = "HITBOX OFF"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextScaled = true

local toggle = Instance.new("TextButton", frame)
toggle.Size = UDim2.new(.4,0,.3,0)
toggle.Position = UDim2.new(.05,0,.45,0)
toggle.Text = "ON/OFF"
toggle.BackgroundColor3 = Color3.fromRGB(40,40,40)
toggle.TextColor3 = Color3.new(1,1,1)
toggle.TextScaled = true
Instance.new("UICorner", toggle)

local box = Instance.new("TextBox", frame)
box.Size = UDim2.new(.4,0,.3,0)
box.Position = UDim2.new(.55,0,.45,0)
box.Text = tostring(HITBOX)
box.PlaceholderText = "SIZE"
box.BackgroundColor3 = Color3.fromRGB(40,40,40)
box.TextColor3 = Color3.new(1,1,1)
box.TextScaled = true
Instance.new("UICorner", box)

toggle.MouseButton1Click:Connect(function()
	enabled = not enabled
	title.Text = enabled and "HITBOX ON" or "HITBOX OFF"
end)

box.FocusLost:Connect(function()
	local v = tonumber(box.Text)
	if v then
		HITBOX = math.clamp(v,5,80)
		box.Text = tostring(HITBOX)
	end
end)

local function makeOutline(hrp)
	if adornments[hrp] then return end

	local boxAd = Instance.new("BoxHandleAdornment")
	boxAd.Adornee = hrp
	boxAd.AlwaysOnTop = true
	boxAd.ZIndex = 5
	boxAd.Size = hrp.Size
	boxAd.Color3 = Color3.fromRGB(180,180,180)
	boxAd.Transparency = 0.4 -- solo bordes visibles
	boxAd.Parent = hrp

	adornments[hrp] = boxAd
end

local function removeOutline(hrp)
	if adornments[hrp] then
		adornments[hrp]:Destroy()
		adornments[hrp] = nil
	end
end

-- HITBOX LOGIC
RunService.Heartbeat:Connect(function()
	for _,plr in pairs(Players:GetPlayers()) do
		if plr ~= lp and plr.Character then
			local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
			if hrp then
				if enabled then
					hrp.Size = Vector3.new(HITBOX,HITBOX,HITBOX)

					-- casi invisible
					hrp.Transparency = 0.85

					-- atravesable SOLO hitbox
					hrp.CanCollide = false

					makeOutline(hrp)
					adornments[hrp].Size = hrp.Size
				else
					hrp.Size = Vector3.new(2,2,1)
					hrp.Transparency = 1
					removeOutline(hrp)
				end
			end
		end
	end
end)
